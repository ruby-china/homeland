<div class="card-body markdown markdown-toc">

  <p>各类系统总会或多或少的需要一些赞、收藏、关注/订阅等功能。</p>

  <p>每次我们都要重新开发么？不！那不是 DRY 的风格。</p>

  <p>鉴于多次这类功能的实践总结，我发布了 <a href="https://github.com/rails-engine/action-store" rel="nofollow" target="_blank"
      title="">ActionStore</a>，一个可以帮你解决这类需求的库。</p>
  <h2 id="介绍">介绍</h2>
  <p><a href="https://github.com/rails-engine/action-store" rel="nofollow" target="_blank" title="">ActionStore</a> 采用
    Active Record 多态关联（Polymorphic Association）的方式存储各种类型的动作数据，例如：赞、喜欢、收藏、关注、订阅、屏蔽（靠你的想象，还可以干更多的事情）等等，各类 User -&gt;
    Target 的场景。</p>

  <p>因此你无需对这些动作重复重建表、Model，也不用重复写 <code>like_topic</code>, <code>unlike_topic</code>, <code>@topic.like_by_users</code>,
    <code>@user.like_topics</code> 之类的逻辑函数。一切都由 ActionStore 内部帮你处理掉。</p>
  <h2 id="项目地址：">项目地址：</h2>
  <p><a href="https://github.com/rails-engine/action-store" rel="nofollow"
      target="_blank">https://github.com/rails-engine/action-store</a></p>
  <h2 id="适用的场景">适用的场景</h2>
  <ul>
    <li>赞（Like) - Post / Topic / Reply / Comment / Issue ...</li>
    <li>订阅 (Subscribe) - Post / Category</li>
    <li>好友关注 (Follow) - User</li>
    <li>收藏 (Star) - Post / Topic / Reply</li>
  </ul>
  <h2 id="基本结构">基本结构</h2>
  <table class="table table-bordered table-striped">
    <tbody>
      <tr>
        <th>Field</th>
        <th>含义</th>
      </tr>
      <tr>
        <td><code>action_type</code></td>
        <td>action 类型 [like, watch, follow, star, favorite]</td>
      </tr>
      <tr>
        <td>
          <code>user_type</code>, <code>user_id</code>
        </td>
        <td>多态的方式关联 <code>User</code> models [User, Person, Member]</td>
      </tr>
      <tr>
        <td>
          <code>target_type</code>, <code>target_id</code>
        </td>
        <td>多态的方式关联 <code>Target</code> models [User, Post, Comment]</td>
        <p>此方法将会替代 Ruby China 里面的类似功能，参见这个 <a href="https://github.com/ruby-china/homeland/pull/857" rel="nofollow"
            target="_blank" title="">ruby-china/homeland#857</a></p>

</div>
